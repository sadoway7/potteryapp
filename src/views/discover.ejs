<h2>Discover Markets</h2>
<form action="/markets" method="GET" class="search-filters">
    <div class="search-bar">
        <input type="search"
               name="search"
               placeholder="Search by name, city, or zip code..."
               value="<%= searchTerm || '' %>">
        <button type="submit" class="btn-primary">Search</button>
    </div>

    <div class="filter-options">
        <select name="city" class="filter-select">
            <option value="">All Cities</option>
            <% cities.forEach(city => { %>
                <option value="<%= city %>" <%= selectedCity === city ? 'selected' : '' %>>
                    <%= city %>
                </option>
            <% }) %>
        </select>

        <select name="zip" class="filter-select">
            <option value="">All Zip Codes</option>
            <% zips.forEach(zip => { %>
                <option value="<%= zip %>" <%= selectedZip === zip ? 'selected' : '' %>>
                    <%= zip %>
                </option>
            <% }) %>
        </select>
    </div>
</form>

<div class="market-list">
    <% if (markets && markets.length) { %>
        <% markets.forEach(market => { %>
            <div class="market-card">
                <h3><%= market.name %></h3>
                <p><%= market.address || 'No address provided' %></p>
                <a href="/market/<%= market.id %>" class="btn-secondary">View Details</a>
            </div>
        <% }) %>
    <% } else { %>
        <p>No markets found. Why not be the first to <a href="/markets/new">add one</a>?</p>
    <% } %>
</div>
