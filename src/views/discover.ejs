<%- contentFor('body') %>
<h2>Discover Markets</h2>
<form action="/markets" method="GET" class="search-filters">
    <div class="search-bar">
        <input type="search"
               name="search"
               placeholder="Search by name, city, or zip code..."
               value="<%= searchTerm || '' %>">
        <button type="submit" class="btn-primary">Search</button>
    </div>

    <div class="filter-options">
        <select name="city" class="filter-select">
            <option value="">All Cities</option>
            <% cities.forEach(city => { %>
                <option value="<%= city %>" <%= selectedCity === city ? 'selected' : '' %>>
                    <%= city %>
                </option>
            <% }) %>
        </select>

        <select name="zip" class="filter-select">
            <option value="">All Zip Codes</option>
            <% zips.forEach(zip => { %>
                <option value="<%= zip %>" <%= selectedZip === zip ? 'selected' : '' %>>
                    <%= zip %>
                </option>
            <% }) %>
        </select>
    </div>
</form>

<div class="market-list">
    <% if (markets && markets.length) { %>
        <% markets.forEach(market => { %>
            <div class="market-card">
                <h3><%= market.name %></h3>
                <p><%= market.address || 'No address provided' %></p>
                <a href="/market/<%= market.id %>" class="btn-secondary">View Details</a>
            </div>
        <% }) %>
    <% } else { %>
        <div class="empty-state">
            <h3>Welcome to Rumfor Market!</h3>
            <p>No markets have been added yet.</p>
            <div class="cta-buttons">
                <a href="/markets/new" class="btn-primary">Add First Market</a>
                <a href="/demo" class="btn-secondary">View Demo Data</a>
            </div>
        </div>
    <% } %>
</div>

<style>
.empty-state {
    text-align: center;
    padding: 2rem;
    background: #f8f9fa;
    border-radius: 8px;
}
.cta-buttons {
    margin-top: 1.5rem;
    display: flex;
    gap: 1rem;
    justify-content: center;
}
</style>
<%- endContent() %>
